@model Shop_Mobile.Areas.Admin.Controllers.RamHDHBNTController.ViewModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_MainLayoutAdmin.cshtml";
}

<style>
    table {
        border-collapse: collapse;
        width: 50%;
        margin: auto;
    }

    th, td {
        padding: 8px;
        text-align: center;
        border-bottom: 1px solid #ddd;
    }

    .imgpx {
        max-width: 15px;
        max-height: 15px;
        filter: brightness(0) invert(1);
        -webkit-filter: brightness(0) invert(1);
    }

    img {
        max-width: 15px;
        max-height: 15px;
        filter: brightness(0) invert(1);
        -webkit-filter: brightness(0) invert(1);
    }

    .table-spacingBot {
        margin-bottom: 50px;
    }

    .mb-5 {
        margin-bottom: 30px;
    }

    .ml-5 {
        margin-left: 30px;
    }
</style>

<div class="mb-30"><h2 class="ml-30">Quản Lý Ram, Hệ Điều Hành, Bộ Nhớ Sản Phẩm</h2></div>

<table class="table-spacingBot">
    <tr>
        <th>Hệ Điều Hành</th>
        <th>Tên Hệ Điều Hành</th>
        <th><a href="@Url.Action("CreateHDH","RamHDHBNT")"><img src="~/Asset/images/add.png.png" style="margin-left:auto" /></a></th>
    </tr>
    @foreach (var hdh in Model.DanhSachHDH)
    {
        <tr>
            <td>@hdh.MaHeDieuHanh</td>
            <td>@hdh.TenHeDieuHanh</td>
            <td><a href="@Url.Action("EditHDH","RamHDHBNT", new { id = hdh.MaHeDieuHanh })"><img src="~/Asset/images/edit.png.png" /></a></td>
            <td>
                <img class="btn-xoa-hdh imgpx" src="~/Asset/images/delete.png.png" alt="Delete" data-ma-He-Dieu-Hanh="@hdh.MaHeDieuHanh" />
            </td>
        </tr>
    }
</table>

<table class="table-spacingBot">
    <tr>
        <th>Mã Bộ Nhớ Trong</th>
        <th>Dung Lượng Bộ Nhớ</th>
        <th><a href="@Url.Action("CreateBNT","RamHDHBNT")"><img src="~/Asset/images/add.png.png" style="margin-left:auto" /></a></th>
    </tr>
    @foreach (var bnt in Model.DanhSachBNT)
    {
        <tr>
            <td>@bnt.MaBoNhoTrong</td>
            <td>@bnt.DungLuongBoNho</td>
            <td><a href="@Url.Action("EditBNT","RamHDHBNT", new { maBoNhoTrong = bnt.MaBoNhoTrong })"><img src="~/Asset/images/edit.png.png" /></a></td>
            <td>
                <img class="btn-xoa-bnt imgpx" src="~/Asset/images/delete.png.png" alt="Delete" data-ma-Bo-Nho-Trong="@bnt.MaBoNhoTrong" />
            </td>
        </tr>
    }
</table>

<table class="table-spacingBot">
    <tr>
        <th>Mã Ram</th>
        <th>Dung Lượng Ram</th>
        <th><a href="@Url.Action("CreateRam","RamHDHBNT")"><img src="~/Asset/images/add.png.png" style="margin-left:auto" /></a></th>
    </tr>
    @foreach (var ram in Model.DanhSachRam)
    {
        <tr>
            <td>@ram.MaRam</td>
            <td>@ram.DungLuongRam</td>
            <td><a href="@Url.Action("EditRam","RamHDHBNT", new { maRam = ram.MaRam })"><img src="~/Asset/images/edit.png.png" /></a></td>
            <td>
                <img class="btn-xoa-ram imgpx" src="~/Asset/images/delete.png.png" alt="Delete" data-ma-Ram="@ram.MaRam" />
            </td>
        </tr>
    }
</table>


<script>
    function xoaAjax(url, IdHDH, IdBNT, IdR) {
        Swal.fire({
            title: 'Xác nhận xóa',
            text: "Bạn có chắc chắn muốn xóa không?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Xóa',
            cancelButtonText: 'Hủy',
            reverseButtons: true
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: url,
                    type: 'POST',
                    data: { maHeDieuHanh: IdHDH, maBoNhoTrong: IdBNT, maRam: IdR },
                    success: function (result) {
                        if (result.success) {
                            console.log("xóa thành công!");
                            window.location.reload(true)
                        }
                    },
                    error: function () {
                        console.log("thất bại");
                    }
                });
            }
        });
    }
    $(".btn-xoa-hdh").click(function (e) {
        e.preventDefault();
        var IdHDH = $(this).data("maHeDieuHanh");
        console.log("id:", IdHDH);
        xoaAjax('/RamHDHBNT/DeleteHDH', IdHDH, null, null);
    });

    $(".btn-xoa-bnt").click(function (e) {
        e.preventDefault();
        var IdBNT = $(this).data("maBoNhoTrong");
        xoaAjax('/RamHDHBNT/DeleteBNT', null, IdBNT, null);
    });

    $(".btn-xoa-ram").click(function (e) {
        e.preventDefault();
        var IdR = $(this).data("maRam");
        console.log("id:", IdR);
        xoaAjax('/RamHDHBNT/DeleteRam', null, null, IdR);
    });

</script>
