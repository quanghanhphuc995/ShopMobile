@model IEnumerable<ShopConnection.LoaiSanPham>
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_MainLayoutAdmin.cshtml";
}

<style>
    table {
        border-collapse: collapse;
        width: 50%;
        margin: auto;
    }

    th, td {
        padding: 8px;
        text-align: center;
        border-bottom: 1px solid #ddd;
    }

    .imgpx {
        max-width: 15px;
        max-height: 15px;
        filter: brightness(0) invert(1);
        -webkit-filter: brightness(0) invert(1);
    }

    img {
        max-width: 15px;
        max-height: 15px;
        filter: brightness(0) invert(1);
        -webkit-filter: brightness(0) invert(1);
    }
</style>


<h2>Quản Lý Loại Sản Phẩm</h2>


<table>

    <tr>
        <th>Mã Loại Sản Phẩm</th>
        <th>Tên Loại Sản Phẩm</th>
        <th>Tình Trạng</th>
        <th><a href="@Url.Action("Create","LoaiSanPhamAdmin")"><img src="~/Asset/images/add.png.png" style="margin-left:auto" /></a></th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.MaLoaiSanPham</td>
            <td>@item.TenLoaiSanPham</td>
            <td>@item.TinhTrang</td>
            <td><a href="@Url.Action("Edit","LoaiSanPhamAdmin",new {id = item.MaLoaiSanPham })"><img src="~/Asset/images/edit.png.png" /></a></td>
            <td>
                <img class="btn-xoa imgpx" src="~/Asset/images/delete.png.png" alt="Delete" data-id="@item.MaLoaiSanPham" />
            </td>
        </tr>
    }



</table>

<script>
    $(document).ready(function() {
        $(".btn-xoa").click(function (e) {
            e.preventDefault();
            var button = $(this);
            var Id = button.data("id");

            Swal.fire({
                title: 'Xác nhận xóa',
                text: "Bạn có chắc chắn muốn xóa loại sản phẩm này không?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Xóa',
                cancelButtonText: 'Hủy',
                reverseButtons: true
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        url: '/LoaiSanPhamAdmin/Delete', // Đảm bảo URL chính xác
                        type: 'POST',
                        data: { id: Id },
                        success: function (result) {
                            if (result.success) {
                                console.log("xóa thành công!");
                                window.location.reload(); // Hoặc cập nhật giao diện mà không tải lại trang
                            }
                        },
                        error: function () {
                            console.log("thất bại");
                        }
                    });
                }
            });
        });
    });
</script>
